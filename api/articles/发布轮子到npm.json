{"title":"发布轮子到npm","uid":"46cbb2bb63f1ff3e16d9556aa8441940","slug":"发布轮子到npm","date":"2022-05-29T06:20:31.000Z","updated":"2022-05-29T06:20:43.246Z","comments":true,"path":"api/articles/发布轮子到npm.json","keywords":null,"cover":null,"content":"<h1 id=\"发布轮子到-npm\"><a href=\"#发布轮子到-npm\" class=\"headerlink\" title=\"发布轮子到 npm\"></a>发布轮子到 npm</h1><h3 id=\"要做两件事\"><a href=\"#要做两件事\" class=\"headerlink\" title=\"要做两件事\"></a>要做两件事</h3><p><strong>部署官网</strong></p>\n<ul>\n<li>让官网上线，有好的文档才更容易让人使用</li>\n</ul>\n<p><strong>发布 sakura-ui</strong></p>\n<ul>\n<li>让其他开发者可以使用 npm install sakura-ui 安装源码</li>\n</ul>\n<h3 id=\"发布你的官网\"><a href=\"#发布你的官网\" class=\"headerlink\" title=\"发布你的官网\"></a>发布你的官网</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">// 其实就是把 dist 目录上传到网上\n<span class=\"token function\">yarn</span> build 时要注意设置 build path<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<h3 id=\"发布官网的步骤\"><a href=\"#发布官网的步骤\" class=\"headerlink\" title=\"发布官网的步骤\"></a>发布官网的步骤</h3><ul>\n<li>如果有 dist 目录，则删除 dist 目录</li>\n<li>在 .gitignore 添加一行 &#x2F;dist&#x2F; 然后提交代码</li>\n<li>运行 yarn build 创建出最新的 dist</li>\n<li>运行 hs dist 在本地测试网站是否成功运行</li>\n<li>部署到 GitHub</li>\n</ul>\n<p><strong>运行命令</strong></p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> dist\n<span class=\"token function\">git</span> init\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span>\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">\"first commit\"</span>\n<span class=\"token function\">git</span> branch -M master\n<span class=\"token function\">git</span> remote <span class=\"token function\">add</span> origin 以git@开头的仓库地址\n<span class=\"token function\">git</span> push -f -u origin master\n<span class=\"token builtin class-name\">cd</span> <span class=\"token punctuation\">..</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>开启 sakura-ui 的 Pages 功能</strong></p>\n<p><strong>部署到码云</strong></p>\n<p><strong>设置 build path</strong></p>\n<h3 id=\"一键部署\"><a href=\"#一键部署\" class=\"headerlink\" title=\"一键部署\"></a>一键部署</h3><p><strong>根目录新建 deploy.sh 文件</strong></p>\n<pre class=\"line-numbers language-sh\" data-language=\"sh\"><code class=\"language-sh\">rm -rf dist &amp;&amp;\nyarn build &amp;&amp;\ncd dist &amp;&amp;\ngit init &amp;&amp;\ngit add . &amp;&amp;\ngit commit -m &quot;update&quot; &amp;&amp;\ngit branch -M master &amp;&amp;\ngit remote add origin git@github.com:XXXXXXX&#x2F;XXXXXXX-UI.git &amp;&amp;\ngit push -f -u origin master &amp;&amp;\ncd -\necho https:&#x2F;&#x2F;XXXXXXX.github.io&#x2F;XXXXXXX-UI&#x2F;index.html  &#x2F;&#x2F;预览链接<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>然后运行 sh deploy.sh</strong></p>\n<h3 id=\"打包库文件\"><a href=\"#打包库文件\" class=\"headerlink\" title=\"打包库文件\"></a>打包库文件</h3><p><strong>vite 暂不支持，需要自行配置 rollup</strong></p>\n<h3 id=\"第一步：创建-lib-x2F-index-ts\"><a href=\"#第一步：创建-lib-x2F-index-ts\" class=\"headerlink\" title=\"第一步：创建 lib&#x2F;index.ts\"></a>第一步：创建 lib&#x2F;index.ts</h3><p><strong>将所有需要导出的东西导出</strong></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">as</span> Switch <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./Switch.vue'</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">as</span> Button <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./Button.vue'</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">as</span> Tabs <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./Tabs.vue'</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">as</span> Tab <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./Tab.vue'</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">as</span> Dialog <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./Dialog.vue'</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">&#123;</span> openDialog <span class=\"token keyword\">as</span> openDialog <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./openDialog'</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"第二步：rollup-config-js\"><a href=\"#第二步：rollup-config-js\" class=\"headerlink\" title=\"第二步：rollup.config.js\"></a>第二步：rollup.config.js</h3><p>告诉 rollup 怎么打包</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 请先安装 rollup-plugin-esbuild rollup-plugin-vue rollup-plugin-scss sass rollup-plugin-terser</span>\n<span class=\"token comment\">// 为了保证版本一致，请复制我的 package.json 到你的项目，并把 name 改成你的库名</span>\n<span class=\"token keyword\">import</span> esbuild <span class=\"token keyword\">from</span> <span class=\"token string\">'rollup-plugin-esbuild'</span>\n<span class=\"token keyword\">import</span> vue <span class=\"token keyword\">from</span> <span class=\"token string\">'rollup-plugin-vue'</span>\n<span class=\"token keyword\">import</span> scss <span class=\"token keyword\">from</span> <span class=\"token string\">'rollup-plugin-scss'</span>\n<span class=\"token keyword\">import</span> dartSass <span class=\"token keyword\">from</span> <span class=\"token string\">'sass'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> terser <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'rollup-plugin-terser'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token string\">'src/lib/index.ts'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\t<span class=\"token literal-property property\">globals</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n\t\t\t\t<span class=\"token literal-property property\">vue</span><span class=\"token operator\">:</span> <span class=\"token string\">'Vue'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Sakura'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token literal-property property\">file</span><span class=\"token operator\">:</span> <span class=\"token string\">'dist/lib/sakura.js'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token literal-property property\">format</span><span class=\"token operator\">:</span> <span class=\"token string\">'umd'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">terser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\t<span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Sakura'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token literal-property property\">file</span><span class=\"token operator\">:</span> <span class=\"token string\">'dist/lib/sakura.esm.js'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token literal-property property\">format</span><span class=\"token operator\">:</span> <span class=\"token string\">'es'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">terser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\t\t<span class=\"token function\">scss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">include</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.scss$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">sass</span><span class=\"token operator\">:</span> dartSass <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token function\">esbuild</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n\t\t\t<span class=\"token literal-property property\">include</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.[jt]s$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token literal-property property\">minify</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">'production'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> <span class=\"token string\">'es2015'</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token function\">vue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n\t\t\t<span class=\"token literal-property property\">include</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.vue$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"第三步：运行-rollup-c\"><a href=\"#第三步：运行-rollup-c\" class=\"headerlink\" title=\"第三步：运行 rollup -c\"></a>第三步：运行 rollup -c</h3><ul>\n<li>请先全局安装 rollup（或者局部安装）</li>\n<li>yarn global add rollup</li>\n<li>npm i -g rollup</li>\n</ul>\n<h3 id=\"发布-dist-x2F-lib-x2F-目录\"><a href=\"#发布-dist-x2F-lib-x2F-目录\" class=\"headerlink\" title=\"发布 dist&#x2F;lib&#x2F; 目录\"></a>发布 dist&#x2F;lib&#x2F; 目录</h3><p><strong>其实就是上传到 npm 的服务器</strong></p>\n<h3 id=\"第一步：添加-files-和-main\"><a href=\"#第一步：添加-files-和-main\" class=\"headerlink\" title=\"第一步：添加 files 和 main\"></a>第一步：添加 files 和 main</h3><p>打开 package.json</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sakura-ui-dev\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.0.1\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"files\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"dist/lib/*\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dist/lib/sakura.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"module\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dist/lib/sakura.esm.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token string-property property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"vite\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"vite build\"</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"resolutions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token string-property property\">\"node-sass\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm:sass@1.26.11\"</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token string-property property\">\"github-markdown-css\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"4.0.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"marked\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.1.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"prismjs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.21.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"vue\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"3.0.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"vue-router\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"4.0.0-beta.3\"</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token string-property property\">\"@vue/compiler-sfc\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"3.0.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"rollup-plugin-esbuild\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2.5.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"rollup-plugin-scss\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2.6.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"rollup-plugin-terser\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"7.0.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"rollup-plugin-vue\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"6.0.0-beta.10\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"sass\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.32.11\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"vite\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0-rc.1\"</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>第二步：npm login &amp; npm publish</p>\n<ul>\n<li>请确保你没有在使用淘宝源，请使用官方源</li>\n<li>npm config get registry</li>\n<li>npm config set registry</li>\n<li><a href=\"https://registry.npmjs.org/\">https://registry.npmjs.org/</a></li>\n</ul>\n<h3 id=\"一些可能出现的问题\"><a href=\"#一些可能出现的问题\" class=\"headerlink\" title=\"一些可能出现的问题\"></a>一些可能出现的问题</h3><p><strong>name</strong></p>\n<ul>\n<li>package 的 name 必须是小写字母，可用 - 或 _ 连接</li>\n<li>package 的 name 不能跟 npm 上现有的 name 重名</li>\n</ul>\n<p><strong>version</strong></p>\n<ul>\n<li>每次 publish 的版本不能与上一次的相同</li>\n<li>所以从第二次开始，必须先改 version 再 publish</li>\n</ul>\n<p><strong>注册 npmjs.com 账号</strong></p>\n<ul>\n<li>用网页注册，然后在命令行使用 npm login 登录</li>\n<li>登录之后才能 npm publish</li>\n<li>使用 npm logout 可以退出登录</li>\n</ul>\n<h3 id=\"如何升级-Vue-2-到-Vue-3\"><a href=\"#如何升级-Vue-2-到-Vue-3\" class=\"headerlink\" title=\"如何升级 Vue 2 到 Vue 3\"></a><strong>如何升级 Vue 2 到 Vue 3</strong></h3><p><strong>使用 Vue 官方提供的<a href=\"https://github.com/vuejs/vue-codemod\">工具</a>和<a href=\"https://v3.cn.vuejs.org/guide/migration/introduction.html#%E6%A6%82%E8%A7%88\">教程</a></strong></p>\n<h3 id=\"支持低版本的-node\"><a href=\"#支持低版本的-node\" class=\"headerlink\" title=\"支持低版本的 node\"></a>支持低版本的 node</h3><ul>\n<li>node 10、12 不支持 import 和 ?. 语法</li>\n<li>要么我们手动使用旧语法 require 和 if else</li>\n<li>要么我们利用 esbuild 自动把 TS 转译成旧语法</li>\n</ul>\n<h3 id=\"build-之后不加载-md-文件\"><a href=\"#build-之后不加载-md-文件\" class=\"headerlink\" title=\"build 之后不加载 md 文件\"></a>build 之后不加载 md 文件</h3><p>这是因为 rollup 不支持 import() 时拼字符串<br>要么让它支持（不靠谱）<br>要么不要拼字符串</p>\n","text":"发布轮子到 npm要做两件事部署官网 让官网上线，有好的文档才更容易让人使用 发布 sakura-ui 让其他开发者可以使用 npm install sakura-ui 安装源码 发布你的官网// 其实就是把 dist 目录上传到网上 yarn build 时要注意设置 buil...","link":"","photos":[],"count_time":{"symbolsCount":"3.8k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"npm","slug":"npm","count":1,"path":"api/tags/npm.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%8F%91%E5%B8%83%E8%BD%AE%E5%AD%90%E5%88%B0-npm\"><span class=\"toc-text\">发布轮子到 npm</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%A6%81%E5%81%9A%E4%B8%A4%E4%BB%B6%E4%BA%8B\"><span class=\"toc-text\">要做两件事</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8F%91%E5%B8%83%E4%BD%A0%E7%9A%84%E5%AE%98%E7%BD%91\"><span class=\"toc-text\">发布你的官网</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8F%91%E5%B8%83%E5%AE%98%E7%BD%91%E7%9A%84%E6%AD%A5%E9%AA%A4\"><span class=\"toc-text\">发布官网的步骤</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2\"><span class=\"toc-text\">一键部署</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%89%93%E5%8C%85%E5%BA%93%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">打包库文件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-lib-x2F-index-ts\"><span class=\"toc-text\">第一步：创建 lib&#x2F;index.ts</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9Arollup-config-js\"><span class=\"toc-text\">第二步：rollup.config.js</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E8%BF%90%E8%A1%8C-rollup-c\"><span class=\"toc-text\">第三步：运行 rollup -c</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8F%91%E5%B8%83-dist-x2F-lib-x2F-%E7%9B%AE%E5%BD%95\"><span class=\"toc-text\">发布 dist&#x2F;lib&#x2F; 目录</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E6%B7%BB%E5%8A%A0-files-%E5%92%8C-main\"><span class=\"toc-text\">第一步：添加 files 和 main</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%80%E4%BA%9B%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">一些可能出现的问题</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A6%82%E4%BD%95%E5%8D%87%E7%BA%A7-Vue-2-%E5%88%B0-Vue-3\"><span class=\"toc-text\">如何升级 Vue 2 到 Vue 3</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%94%AF%E6%8C%81%E4%BD%8E%E7%89%88%E6%9C%AC%E7%9A%84-node\"><span class=\"toc-text\">支持低版本的 node</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#build-%E4%B9%8B%E5%90%8E%E4%B8%8D%E5%8A%A0%E8%BD%BD-md-%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">build 之后不加载 md 文件</span></a></li></ol></li></ol></li></ol>","author":{"name":"R桑","slug":"blog-author","avatar":"https://img1.baidu.com/it/u=3256850095,2680786815&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>公众号：小k编码</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Fetch的使用-关注分离思想","uid":"e9014eb277f72a7198d4ff54563938a4","slug":"Fetch的使用-关注分离思想","date":"2022-05-30T13:42:00.000Z","updated":"2022-06-01T09:37:47.591Z","comments":true,"path":"api/articles/Fetch的使用-关注分离思想.json","keywords":null,"cover":null,"text":"一1.拆分组件、实现静态组件，注意：className、style的写法 2.动态初始化列表，如何确定将数据放在那个组件的state中？—— 某个组件使用：放在自身的state中—— 某些组件使用：放在他们共同的父组件 state 中(官方称为：状态提升) 3.关于父子之间的通信...","link":"","photos":[],"count_time":{"symbolsCount":"2.3k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"HTTP","slug":"HTTP","count":2,"path":"api/tags/HTTP.json"}],"author":{"name":"R桑","slug":"blog-author","avatar":"https://img1.baidu.com/it/u=3256850095,2680786815&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>公众号：小k编码</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"React——Diffing算法初识","uid":"7d81c7d2e66457a6322f3eb94b638116","slug":"React——Diffing算法初识","date":"2022-05-29T06:17:36.000Z","updated":"2022-05-29T06:17:52.170Z","comments":true,"path":"api/articles/React——Diffing算法初识.json","keywords":null,"cover":null,"text":"首先思考两个问题 react&#x2F;vue 中的 key 有什么作用？（key 的内部原理是什么？） 为什么遍历列表时，key 最好不要用 index? 1.虚拟 DOM 中 key 的作用： 简单的说: key 是虚拟 DOM 对象的标识, 在更新显示时 key 起着极其重...","link":"","photos":[],"count_time":{"symbolsCount":"4k","symbolsTime":"4 mins."},"categories":[],"tags":[{"name":"React","slug":"React","count":1,"path":"api/tags/React.json"}],"author":{"name":"R桑","slug":"blog-author","avatar":"https://img1.baidu.com/it/u=3256850095,2680786815&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>公众号：小k编码</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}