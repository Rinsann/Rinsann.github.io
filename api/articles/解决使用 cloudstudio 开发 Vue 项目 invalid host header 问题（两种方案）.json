{"title":"解决使用 cloud studio 开发 Vue 项目 invalid host header 问题（两种方案）","uid":"258da2b64e414aee9cf34078b2c393e2","slug":"解决使用 cloudstudio 开发 Vue 项目 invalid host header 问题（两种方案）","date":"2022-07-13T14:41:36.000Z","updated":"2022-07-13T14:42:43.742Z","comments":true,"path":"api/articles/解决使用 cloudstudio 开发 Vue 项目 invalid host header 问题（两种方案）.json","keywords":null,"cover":null,"content":"<h2 id=\"解决使用-cloudstudio-开发-Vue-项目-invalid-host-header-问题（两种方案）\"><a href=\"#解决使用-cloudstudio-开发-Vue-项目-invalid-host-header-问题（两种方案）\" class=\"headerlink\" title=\"解决使用 cloudstudio 开发 Vue 项目 invalid host header 问题（两种方案）\"></a>解决使用 <code>cloudstudio</code> 开发 <code>Vue</code> 项目 <code>invalid host header</code> 问题（两种方案）</h2><p>问题出现背景<br>最近想体验一下使用浏览器在线开发 <code>Vue</code>项目体验了一下<code>vscode.dev</code>和<code>cloud studio</code>，最后感觉目前体验<code>cloud studio</code>更好一点。</p>\n<p>但是在体验的时候遇到了一个问题，启动项目后打开内置浏览器页面显示 <code>invalid host header</code>。</p>\n<h3 id=\"分析问题\"><a href=\"#分析问题\" class=\"headerlink\" title=\"分析问题\"></a>分析问题</h3><p>这句话的意思是：无效的<code>Host</code>请求头；</p>\n<p>因为在<code>vue</code>在调试时相当于启动了一个服务器以供我们访问（当我们<code>build</code>后，就可以放在我们自己的<code>nginx</code>等服务器）</p>\n<p>测试环境下的<code>webpack</code>有一个<code>host</code>检查功能：<code>webpack</code>的<code>devServer</code>中</p>\n<p>如果不配置<code>host</code>就无法访问，解决办法有好几种，可以去设置<code>host</code>，比如：</p>\n<h3 id=\"第一种解决方案\"><a href=\"#第一种解决方案\" class=\"headerlink\" title=\"第一种解决方案\"></a>第一种解决方案</h3><p>设置允许访问的域名</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token comment\">//...</span>\n\t<span class=\"token literal-property property\">devServer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token literal-property property\">allowedHosts</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\t\t\t<span class=\"token string\">'host.com'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 允许访问的域名地址，即花生壳内网穿透的地址</span>\n\t\t\t<span class=\"token string\">'.host.com'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// .是二级域名的通配符</span>\n\t\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>还有一种更简单的解决方案</p>\n<h3 id=\"更简单的解决方案\"><a href=\"#更简单的解决方案\" class=\"headerlink\" title=\"更简单的解决方案\"></a>更简单的解决方案</h3><p>设置跳过<code>host</code>检查</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// vue3 vue.config.js</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token comment\">// 跳过检查host</span>\n\t<span class=\"token literal-property property\">devServer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">disableHostCheck</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 在vue-cli版本为2.x的情况下修改webpack.dev.conf.js中的devServer对象加入disableHostCheck: true</span>\n<span class=\"token literal-property property\">devServer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token literal-property property\">disableHostCheck</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>设置完成后记得重启应用。</p></blockquote>\n","feature":true,"text":"解决使用 cloudstudio 开发 Vue 项目 invalid host header 问题（两种方案）问题出现背景最近想体验一下使用浏览器在线开发 Vue项目体验了一下vscode.dev和cloud studio，最后感觉目前体验cloud studio更好一点。 但是...","link":"","photos":[],"count_time":{"symbolsCount":837,"symbolsTime":"1 mins."},"categories":[],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E5%86%B3%E4%BD%BF%E7%94%A8-cloudstudio-%E5%BC%80%E5%8F%91-Vue-%E9%A1%B9%E7%9B%AE-invalid-host-header-%E9%97%AE%E9%A2%98%EF%BC%88%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%A1%88%EF%BC%89\"><span class=\"toc-text\">解决使用 cloudstudio 开发 Vue 项目 invalid host header 问题（两种方案）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%86%E6%9E%90%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">分析问题</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%B8%80%E7%A7%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88\"><span class=\"toc-text\">第一种解决方案</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9B%B4%E7%AE%80%E5%8D%95%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88\"><span class=\"toc-text\">更简单的解决方案</span></a></li></ol></li></ol>","author":{"name":"R桑","slug":"blog-author","avatar":"https://img1.baidu.com/it/u=3256850095,2680786815&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>公众号：小k编码</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{},"next_post":{"title":"Hexo 隐藏文章","uid":"96b67f8842f46b7b02f3deffef8158e9","slug":"Hexo隐藏文章","date":"2022-07-10T03:30:49.000Z","updated":"2022-07-12T01:18:55.556Z","comments":true,"path":"api/articles/Hexo隐藏文章.json","keywords":null,"cover":null,"text":"使用该 Hexo 插件可以在博客中隐藏指定的文章，并使它们仅可通过链接访问。 当一篇文章被设置为「隐藏」时，它不会出现在任何列表中（包括首页、存档、分类页面、标签页面、Feed、站点地图等），也不会被搜索引擎索引（前提是搜索引擎遵守 noindex 标签）。 只有知道文章链接的人...","link":"","photos":[],"count_time":{"symbolsCount":871,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"Hexo","slug":"Hexo","count":1,"path":"api/tags/Hexo.json"}],"author":{"name":"R桑","slug":"blog-author","avatar":"https://img1.baidu.com/it/u=3256850095,2680786815&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>公众号：小k编码</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}